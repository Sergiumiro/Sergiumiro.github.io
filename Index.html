<!doctype html>

<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>–†—É–ª–µ—Ç–∫–∞ —Å–≤–∏–¥–∞–Ω–∏—è</title>
<style>
html,body{margin:0;height:100%;background:#000;color:#fff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;display:flex;justify-content:center;align-items:center;overflow:hidden;}.wheel-container{position:relative;width:100%;max-width:420px;height:60vh;display:flex;flex-direction:column;justify-content:center;align-items:center;} .wheel-list{list-style:none;margin:0;padding:0;width:100%;text-align:center;transform:translateY(0);transition:transform 2.5s cubic-bezier(0.22,1,0.36,1);} .wheel-list li{padding:16px 0;font-size:22px;opacity:0.5;transition:transform 0.3s,opacity 0.3s;} .wheel-list li.active{font-size:28px;opacity:1;transform:scale(1.2);} .settings-btn{position:fixed;top:10px;right:14px;background:transparent;border:none;color:#888;font-size:24px;} .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);} .modal.show{display:flex;} .card{background:#111;padding:16px;border-radius:12px;width:90%;max-width:400px;} input,button{background:#222;color:#fff;border:none;border-radius:8px;padding:10px;width:100%;margin-top:8px;font-size:16px;} .result-screen{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;transition:opacity 1s;} .result-screen.show{opacity:1;} .repeat-btn{margin-top:24px;padding:10px 20px;border-radius:12px;background:#333;color:#fff;border:none;font-size:18px;} </style>

</head>
<body>
<button class="settings-btn" id="settingsBtn">‚öôÔ∏è</button>
<div class="wheel-container" id="screenContainer">
  <ul class="wheel-list" id="wheelList"></ul>
  <div class="result-screen" id="resultScreen">
    <div id="resultPlace" style="font-size:26px;margin-bottom:12px"></div>
    <div id="resultAction" style="font-size:26px"></div>
    <button class="repeat-btn" id="repeatBtn">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
  </div>
</div>
<div class="modal" id="settingsModal">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
      <strong>–†–µ–¥–∞–∫—Ç–æ—Ä —Å–ø–∏—Å–∫–∞</strong>
      <button id="closeSettings">‚úï</button>
    </div>
    <div id="editorList"></div>
    <input id="newItem" placeholder="–ù–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç">
    <button id="addItem">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>
</div>
<script>
const screens = ['place','action','result'];
let currentScreen = 0;
const wheelList = document.getElementById('wheelList');
const settingsBtn = document.getElementById('settingsBtn');
const modal = document.getElementById('settingsModal');
const closeSettings = document.getElementById('closeSettings');
const editorList = document.getElementById('editorList');
const newItemInput = document.getElementById('newItem');
const addItemBtn = document.getElementById('addItem');
const resultScreen = document.getElementById('resultScreen');
const resultPlace = document.getElementById('resultPlace');
const resultAction = document.getElementById('resultAction');
const repeatBtn = document.getElementById('repeatBtn');const STORAGE_KEY = 'date_items_final_v1'; let items = {place:[], action:[]}; let selected = {place:null, action:null}; let spinning = false;

// load or init items.place = JSON.parse(localStorage.getItem('placeList')) || ['–ö–∞—Ñ–µ —É —Ä–µ–∫–∏','–ü–∞—Ä–∫','–ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä','–†–µ—Å—Ç–æ—Ä–∞–Ω','–ö—Ä—ã—à–∞ —Å –≤–∏–¥–æ–º','–ü–∏–∫–Ω–∏–∫']; items.action = JSON.parse(localStorage.getItem('actionList')) || ['–ü—Ä–æ–≥—É–ª–∫–∞','–û–±–µ–¥','–ö–∏–Ω–æ','–¢–∞–Ω—Ü—ã','–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ','–ò–≥—Ä—ã'];

function saveLists(){ localStorage.setItem('placeList', JSON.stringify(items.place)); localStorage.setItem('actionList', JSON.stringify(items.action)); }

function renderWheel(){ wheelList.innerHTML = ''; const listType = screens[currentScreen]; if(listType==='result'){wheelList.style.display='none';return;} wheelList.style.display='block'; const arr = items[listType]; arr.forEach(it=>{ const li=document.createElement('li'); li.textContent=it; wheelList.appendChild(li); }); }

function spinWheel(){ if(spinning) return; spinning = true; const listType = screens[currentScreen]; const arr = items[listType]; const randomIndex = Math.floor(Math.random() * arr.length); const offset = -(randomIndex * 60); document.querySelectorAll('.wheel-list li').forEach(li=>li.classList.remove('active')); wheelList.style.transition='transform 2.5s cubic-bezier(0.22,1,0.36,1)'; wheelList.style.transform=translateY(${offset}px); setTimeout(()=>{ spinning=false; const active = wheelList.children[randomIndex]; active.classList.add('active'); selected[listType] = arr[randomIndex]; if(currentScreen<2){currentScreen++;setTimeout(()=>{renderWheel(); if(currentScreen===2){showResult();}},1000);} },2500); }

function showResult(){ resultPlace.textContent = üìç –ú–µ—Å—Ç–æ: ${selected.place}; resultAction.textContent = üé¨ –î–µ–π—Å—Ç–≤–∏–µ: ${selected.action}; resultScreen.classList.add('show'); }

function renderEditor(){ editorList.innerHTML=''; const listType = screens[currentScreen] === 'place' ? 'place' : 'action'; items[listType].forEach((it,idx)=>{ const row=document.createElement('div'); row.style.display='flex'; row.style.gap='8px'; row.style.marginBottom='6px'; const input=document.createElement('input'); input.value=it; input.onchange=()=>{items[listType][idx]=input.value; saveLists(); renderWheel();}; const del=document.createElement('button'); del.textContent='‚úï'; del.onclick=()=>{items[listType].splice(idx,1); saveLists(); renderEditor(); renderWheel();}; row.appendChild(input); row.appendChild(del); editorList.appendChild(row); }); }

settingsBtn.onclick=()=>{ modal.classList.add('show'); renderEditor(); }; closeSettings.onclick=()=>{ modal.classList.remove('show'); }; addItemBtn.onclick=()=>{ const val=newItemInput.value.trim(); if(!val)return; const listType = screens[currentScreen]==='place'?'place':'action'; items[listType].push(val); saveLists(); newItemInput.value=''; renderEditor(); renderWheel(); }; wheelList.addEventListener('click',()=>{ spinWheel(); }); // touch scroll to spin let touchStartY = null; wheelList.addEventListener('touchstart',e=>{ touchStartY=e.touches[0].clientY; }); wheelList.addEventListener('touchend',e=>{ if(touchStartY!==null){ const delta = e.changedTouches[0].clientY - touchStartY; if(Math.abs(delta)>10) spinWheel(); touchStartY=null; } }); repeatBtn.onclick=()=>{currentScreen=0;selected={place:null,action:null}; resultScreen.classList.remove('show'); renderWheel();};

renderWheel(); </script>

</body>
</html>
